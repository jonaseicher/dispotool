<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

  <f:view contentType="text/html">

    <head>
      <!--Load the AJAX API-->
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <script type="text/javascript">

        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages': ['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

          // Create the data table.
          var data = new google.visualization.DataTable();
          data.addColumn('date', 'Datum');
          data.addColumn('number', 'Menge');
          var test = [];
          var arr = JSON.parse("#{testView.testData}");
          jQuery.each(arr, function () {
            test.push([new Date(this[0]) , this[1] ]);
          });

          data.addRows(test);

          // Set chart options
          var options = {'title': 'Bewegungsdaten vom Topf',
            'width': 800,
            'height': 400};

          // Instantiate and draw our chart, passing in some options.
          var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }
      </script>
    </head>

    <body>
      <div>
        <p id="demo"></p>
        <p id="demo2"></p>
        <p id="demo3"></p>
        <p id="demo4"></p>
        <script type="text/javascript">

          document.getElementById("demo").innerHTML = "#{testView.testData}";
          
          var test2 = [234,3];
          var arr = JSON.parse("#{testView.testData}");
          jQuery.each(arr, function () {
            test2.push([new Date(this[0]) , this[1] ]);
          });

test2.push("asdf");
         
         document.getElementById("demo2").innerHTML = test2.length; 
         document.getElementById("demo4").innerHTML = test2[10]; 
         
         
//          jQuery.each(test, function (i, args) {
//            document.getElementById("demo3").innerHTML += "<p>My id is " + this + ". And i = " + i + ", date=" + args[0] + ", val=" + args[1] + "</p>";
//          });
        </script>
      </div>
      <!--Div that will hold the pie chart-->
      <div id="chart_div"></div>

    </body>

  </f:view>
</html>

